!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){var r=e(4),i=e(5);t.exports=function(t,n,e){var o=n&&e||0;"string"==typeof t&&(n="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var c=0;c<16;++c)n[o+c]=a[c];return n||i(a)}},function(t,n,e){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var t={},n={"==":function(t,n){return t==n},"===":function(t,n){return t===n},"!=":function(t,n){return t!=n},"!==":function(t,n){return t!==n},">":function(t,n){return t>n},">=":function(t,n){return t>=n},"<":function(t,n,e){return void 0===e?t<n:t<n&&n<e},"<=":function(t,n,e){return void 0===e?t<=n:t<=n&&n<=e},"!!":function(n){return t.truthy(n)},"!":function(n){return!t.truthy(n)},"%":function(t,n){return t%n},log:function(t){return console.log(t),t},in:function(t,n){return!(!n||void 0===n.indexOf)&&-1!==n.indexOf(t)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(t,n,e){if(e<0){var r=String(t).substr(n);return r.substr(0,r.length+e)}return String(t).substr(n,e)},"+":function(){return Array.prototype.reduce.call(arguments,(function(t,n){return parseFloat(t,10)+parseFloat(n,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(t,n){return parseFloat(t,10)*parseFloat(n,10)}))},"-":function(t,n){return void 0===n?-t:t-n},"/":function(t,n){return t/n},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(t,n){return t.concat(n)}),[])},var:function(t,n){var e=void 0===n?null:n,r=this;if(void 0===t||""===t||null===t)return r;for(var i=String(t).split("."),o=0;o<i.length;o++){if(null===r)return e;if(void 0===(r=r[i[o]]))return e}return r},missing:function(){for(var n=[],e=Array.isArray(arguments[0])?arguments[0]:arguments,r=0;r<e.length;r++){var i=e[r],o=t.apply({var:i},this);null!==o&&""!==o||n.push(i)}return n},missing_some:function(n,e){var r=t.apply({missing:e},this);return e.length-r.length>=n?[]:r},method:function(t,n,e){return t[n].apply(t,e)}};return t.is_logic=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)&&1===Object.keys(t).length},t.truthy=function(t){return!(Array.isArray(t)&&0===t.length||!t)},t.get_operator=function(t){return Object.keys(t)[0]},t.get_values=function(n){return n[t.get_operator(n)]},t.apply=function(e,r){if(Array.isArray(e))return e.map((function(n){return t.apply(n,r)}));if(!t.is_logic(e))return e;r=r||{};var i,o,a,c,u,l=t.get_operator(e),f=e[l];if(Array.isArray(f)||(f=[f]),"if"===l||"?:"==l){for(i=0;i<f.length-1;i+=2)if(t.truthy(t.apply(f[i],r)))return t.apply(f[i+1],r);return f.length===i+1?t.apply(f[i],r):null}if("and"===l){for(i=0;i<f.length;i+=1)if(o=t.apply(f[i],r),!t.truthy(o))return o;return o}if("or"===l){for(i=0;i<f.length;i+=1)if(o=t.apply(f[i],r),t.truthy(o))return o;return o}if("filter"===l)return c=t.apply(f[0],r),a=f[1],Array.isArray(c)?c.filter((function(n){return t.truthy(t.apply(a,n))})):[];if("map"===l)return c=t.apply(f[0],r),a=f[1],Array.isArray(c)?c.map((function(n){return t.apply(a,n)})):[];if("reduce"===l)return c=t.apply(f[0],r),a=f[1],u=void 0!==f[2]?f[2]:null,Array.isArray(c)?c.reduce((function(n,e){return t.apply(a,{current:e,accumulator:n})}),u):u;if("all"===l){if(c=t.apply(f[0],r),a=f[1],!c.length)return!1;for(i=0;i<c.length;i+=1)if(!t.truthy(t.apply(a,c[i])))return!1;return!0}if("none"===l)return 0===t.apply({filter:f},r).length;if("some"===l)return t.apply({filter:f},r).length>0;if(f=f.map((function(n){return t.apply(n,r)})),"function"==typeof n[l])return n[l].apply(r,f);if(l.indexOf(".")>0){var s=String(l).split("."),d=n;for(i=0;i<s.length;i++)if(void 0===(d=d[s[i]]))throw new Error("Unrecognized operation "+l+" (failed at "+s.slice(0,i+1).join(".")+")");return d.apply(r,f)}throw new Error("Unrecognized operation "+l)},t.uses_data=function(n){var e=[];if(t.is_logic(n)){var r=t.get_operator(n),i=n[r];Array.isArray(i)||(i=[i]),"var"===r?e.push(i[0]):i.map((function(n){e.push.apply(e,t.uses_data(n))}))}return function(t){for(var n=[],e=0,r=t.length;e<r;e++)-1===n.indexOf(t[e])&&n.push(t[e]);return n}(e)},t.add_operation=function(t,e){n[t]=e},t.rm_operation=function(t){delete n[t]},t.rule_like=function(n,e){if(e===n)return!0;if("@"===e)return!0;if("number"===e)return"number"==typeof n;if("string"===e)return"string"==typeof n;if("array"===e)return Array.isArray(n)&&!t.is_logic(n);if(t.is_logic(e)){if(t.is_logic(n)){var r=t.get_operator(e),i=t.get_operator(n);if("@"===r||r===i)return t.rule_like(t.get_values(n,!1),t.get_values(e,!1))}return!1}if(Array.isArray(e)){if(Array.isArray(n)){if(e.length!==n.length)return!1;for(var o=0;o<e.length;o+=1)if(!t.rule_like(n[o],e[o]))return!1;return!0}return!1}return!1},t})?r.call(n,e,n,t):r)||(t.exports=i)},function(t,n,e){t.exports=e(6)},function(t,n,e){},function(t,n){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var r=new Uint8Array(16);t.exports=function(){return e(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),i[n]=t>>>((3&n)<<3)&255;return i}}},function(t,n){for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);t.exports=function(t,n){var r=n||0,i=e;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,n,e){"use strict";e.r(n);e(3);var r=e(0);function i(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(){return r()}function a(t,n){return c(t).find((function(t){return t.id===n}))}function c(t){var n=[];return t.sections.map((function(t){return n.push.apply(n,i(t.controls))})),n}function u(t,n,e){var r=document.createElement(t);return r.type=n,r.value=e||"",r.innerText=e,r}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function f(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,n,e){return n&&f(t.prototype,n),e&&f(t,e),t}var d=function(){function t(){l(this,t),this.id=o(),this.controls=[]}return s(t,[{key:"addControl",value:function(t){this.controls.push(t)}},{key:"render",value:function(){var t=this.controls.map((function(t){return t.render()})).join("");return"<div id='".concat(this.id,"' class='cf-section cf-box'>").concat(t,"</div>")}}]),t}(),p=function(){function t(){l(this,t),this.id=o(),this.sections=[]}return s(t,[{key:"addSection",value:function(){var t=new d;return this.sections.push(t),t}},{key:"render",value:function(t){var n=this.sections.map((function(t){return t.render()})).join("");t("<form id='".concat(this.id,"' class='cf'>").concat(n,"</form>"))}}]),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,n,e){return n&&m(t.prototype,n),e&&m(t,e),t}function v(t,n){return!n||"object"!==h(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&A(t,n)}function A(t,n){return(A=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function E(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var w=function t(n,e,r,i){E(this,t),this.id=o(),this.title=n||"",this.name=e||o(),this.isRequired=r||!1,this.templateName=i,this.conditions=[]},k=function(t){function n(t,e){return E(this,n),v(this,b(n).call(this,t,e))}return g(n,t),y(n,[{key:"render",value:function(){return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <h1 name='").concat(this.name,"' contenteditable=true>").concat(this.title,"</h1>\n                </div>")}}]),n}(w),x=function(t){function n(t,e){return E(this,n),v(this,b(n).call(this,t,e))}return g(n,t),y(n,[{key:"render",value:function(){return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label name='").concat(this.name,"' contenteditable=true>").concat(this.title,"</label>\n                </div>")}}]),n}(w),_=function(t){function n(t,e,r,i){var o;return E(this,n),(o=v(this,b(n).call(this,t,r,i))).type=e,o}return g(n,t),y(n,[{key:"render",value:function(){return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label contenteditable=true>").concat(this.title,"</label>\n                    <span>\n                        <input type='").concat(this.type,"' name='").concat(this.name,"' ").concat(this.isRequired?"required":"",">\n                    </span>\n                </div>")}}]),n}(w),j=function(t){function n(t,e,r){var i;return E(this,n),(i=v(this,b(n).call(this,t,e,r))).options=[],i}return g(n,t),y(n,[{key:"render",value:function(){var t=this.options.map((function(t){return"<option value='".concat(t.key,"'>").concat(t.value,"</option>")})).join("");return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label contenteditable=true>").concat(this.title,"</label>\n                    <span>\n                        <select name='").concat(this.name,"' ").concat(this.isRequired?"required":"",">").concat(t,"</select>\n                    </span>\n                </div>")}}]),n}(w),L=function(t){function n(t,e){var r;return E(this,n),(r=v(this,b(n).call(this,t,e))).options=[],r}return g(n,t),y(n,[{key:"render",value:function(){var t=this,n=this.options.map((function(n){return"<input type='checkbox' name='".concat(t.name,"' value='").concat(n.key,"'>").concat(n.value)})).join("");return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label contenteditable=true>").concat(this.title,"</label>\n                    <span>").concat(n,"</span>\n                </div>")}}]),n}(w),O=function(t){function n(t,e){var r;return E(this,n),(r=v(this,b(n).call(this,t,e))).options=[],r}return g(n,t),y(n,[{key:"render",value:function(){var t=this,n=this.options.map((function(n){return"<input type='radio' name='".concat(t.name,"' value='").concat(n.key,"'>").concat(n.value)})).join("");return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label contenteditable=true>").concat(this.title,"</label>\n                    <span>").concat(n,"</span>\n                </div>")}}]),n}(w),C=function(t){function n(t,e){return E(this,n),v(this,b(n).call(this,t,e))}return g(n,t),y(n,[{key:"render",value:function(){return"<div id='".concat(this.id,"' class='cf-control' data-cf-template-name='").concat(this.templateName,"'>\n                    <label contenteditable=true>").concat(this.title,"</label>\n                    <span>\n                        <textarea name='").concat(this.name,"'></textarea>\n                    </span>\n                </div>")}}]),n}(w),S=e(1),T=e.n(S);function R(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function N(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,n,e){return n&&N(t.prototype,n),e&&N(t,e),t}var I=function(){function t(n){R(this,t),this.value=n}return q(t,[{key:"get",value:function(){return{"==":[{var:"value"},this.value]}}}]),t}(),P=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;R(this,t),this.controlId=n.id,this.isHidden=e},H=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new I,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new P;R(this,t),this.id=o(),this.ifRule=n,this.thenRule=e}return q(t,[{key:"evaluate",value:function(t){return T.a.apply(this.ifRule.get(),{value:t})}}]),t}();function M(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}!function(t){var n=document.createElement("div"),e=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(e),t.classList.add("cf-builder-container","cf-box"),r.classList.add("cf-templates-container","cf-box"),i.classList.add("cf-editor","cf-box"),n.classList.add("cf-top-row"),e.classList.add("cf-bottom-row");var l=[{name:"header",title:"Header",copyTo:function(t){var n=new k("Header",o());n.templateName=this.name,t.addControl(n)}},{name:"label",title:"Label",copyTo:function(t){var n=new x(this.title,o());n.templateName=this.name,t.addControl(n)}},{name:"input",title:"Input",copyTo:function(t){var n=new _(this.title,"text",o());n.templateName=this.name,t.addControl(n)}},{name:"email",title:"Email",copyTo:function(t){var n=new _(this.title,"email",o());n.templateName=this.name,t.addControl(n)}},{name:"date",title:"Date",copyTo:function(t){var n=new _(this.title,"date",o());n.templateName=this.name,t.addControl(n)}},{name:"textarea",title:"Text Area",copyTo:function(t){var n=new C(this.title,o());n.templateName=this.name,t.addControl(n)}},{name:"checkboxgroup",title:"Checkbox Group",copyTo:function(t){var n=new L(this.title,o());n.templateName=this.name,M(Array(4).keys()).forEach((function(t){return n.options.push({key:"checkbox-".concat(t),value:"Checkbox ".concat(t)})})),t.addControl(n)}},{name:"radiogroup",title:"Radio Group",copyTo:function(t){var n=new O(this.title,o());n.templateName=this.name,M(Array(4).keys()).forEach((function(t){return n.options.push({key:"radio-".concat(t),value:"Radio ".concat(t)})})),t.addControl(n)}},{name:"dropdownlist",title:"Dropdown List",copyTo:function(t){var n=new j(this.title,o());n.templateName=this.name,M(Array(4).keys()).forEach((function(t){return n.options.push({key:0===t?"":"option-".concat(t),value:0===t?"":"Option ".concat(t)})})),t.addControl(n)}}];function f(t){var n=c(g).find((function(n){return n.id===t.target.parentElement.id}));n&&(n.title=t.target.innerText,b(),h())}function s(t){var n=a(g,t.target.closest(".cf-control").id);n&&function(t,n){t.conditions.forEach((function(t){var n=document.getElementById(t.thenRule.controlId);n&&n.classList.remove("cf-control-hidden")})),t.conditions.forEach((function(t){t.evaluate(n)&&t.thenRule.isHidden&&document.getElementById(t.thenRule.controlId).classList.add("cf-control-hidden")}))}(n,t.target.value)}function d(t){var n=t.target.querySelector(".cf-control");n&&(a(g,n.id).conditions.push(new H),h())}function h(){e.innerHTML="",c(g).forEach((function(t){t.conditions.forEach((function(n){var r=u("div",null,"");r.classList.add("cf-condition-row","cf-box"),e.appendChild(r),r.appendChild(u("div",null,"If")),r.appendChild(u("div",null,"".concat(t.title))),r.appendChild(u("div",null,"="));var i=u("input","text",n.ifRule.value);r.appendChild(i),r.appendChild(u("div",null,"Then"));var o=document.createElement("select");o.options.add(new Option("","")),o.options.add(new Option("Show","show")),o.options.add(new Option("Hide","hide")),o.value=n.thenRule.isHidden?"hide":"show",r.appendChild(o);var l=document.createElement("select");c(g).filter((function(n){return n.id!==t.id})).forEach((function(t){var n=a(g,t.id);l.options.add(new Option(n.title,n.id)),document.getElementById(n.id).addEventListener("blur",(function(t){Array.from(l.options).find((function(n){return n.value===t.target.id})).text=t.target.innerHTML}))})),l.value=n.thenRule.controlId,r.appendChild(l);var f=u("input","button","Save");f.setAttribute("disabled","true"),r.appendChild(f),f.addEventListener("click",(function(t){n.ifRule.value=i.value,n.thenRule.controlId=l.value,n.thenRule.isHidden="hide"===o.value,f.setAttribute("disabled","true")}));var s=u("input","button","Delete");r.appendChild(s),s.addEventListener("click",(function(e){t.conditions=t.conditions.filter((function(t){return t.id!==n.id})),h()})),[o,l,i].forEach((function(t){return t.addEventListener("change",(function(t){return f.removeAttribute("disabled")}))}))}))}))}function m(t){t.dataTransfer.setData("templateName",t.target.getAttribute("data-cf-template-name"))}function y(t){t.preventDefault()}function v(t){var n=t.dataTransfer.getData("templateName"),e=l.find((function(t){return t.name===n})),r=g.addSection();e.copyTo(r),g.render((function(t){i.innerHTML=t,b(),h()}))}function b(){document.querySelectorAll(".cf-control").forEach((function(t){return t.classList.add("form-group")})),document.querySelectorAll(".cf-element-template").forEach((function(t){return t.classList.add("btn","btn-primary")})),document.querySelectorAll(".cf-control>span").forEach((function(t){t.removeEventListener("change",s),t.addEventListener("change",s),t.removeEventListener("input",s),t.addEventListener("input",s)})),document.querySelectorAll(".cf-section").forEach((function(t){t.removeEventListener("dblclick",d),t.addEventListener("dblclick",d)})),document.querySelectorAll("[contenteditable=true]").forEach((function(t){t.removeEventListener("input",f),t.addEventListener("input",f)})),h()}l.forEach((function(t){var n=document.createElement("button");n.classList.add("cf-element-template"),n.setAttribute("data-cf-template-name",t.name),n.innerHTML=t.title,r.appendChild(n)}));var g=new p;document.querySelectorAll(".cf-element-template").forEach((function(t){t.setAttribute("draggable","true"),t.removeEventListener("dragstart",m),t.addEventListener("dragstart",m)})),document.querySelectorAll(".cf-editor").forEach((function(t){t.removeEventListener("dragover",y),t.addEventListener("dragover",y),t.removeEventListener("drop",v),t.addEventListener("drop",v)})),b()}(document.getElementById("form-builder"))}]);